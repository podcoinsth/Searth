# ------------------------------------------------------------------
# üìú ‡∏Ñ‡∏≤‡∏ñ‡∏≤ DevOps ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Searth ‡πÇ‡∏î‡∏¢ ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏õ‡πä‡∏≠‡∏î
# ------------------------------------------------------------------
# ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≤‡∏ñ‡∏≤‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Actions
name: Build and Deploy PodSearth to GitHub Pages

# ------------------------------------------------------------------
# ‚ú® ‡∏ó‡∏£‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå: ‡∏à‡∏∞‡∏£‡πà‡∏≤‡∏¢‡∏Ñ‡∏≤‡∏ñ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà?
# ------------------------------------------------------------------
on:
  # ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£ push ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà branch 'main'
  push:
    branches: ["main"]
  # ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô workflow ‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Actions (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å deploy ‡πÄ‡∏≠‡∏á)
  workflow_dispatch:

# ------------------------------------------------------------------
# üîí ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå: ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≤‡∏ñ‡∏≤‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á GitHub Pages
# ------------------------------------------------------------------
permissions:
  contents: read
  pages: write
  id-token: write

# ------------------------------------------------------------------
# ‚öôÔ∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≤‡∏ñ‡∏≤ (Jobs)
# ------------------------------------------------------------------
jobs:
  # --- ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Build (‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö) ---
  build:
    # ‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå Ubuntu ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    runs-on: ubuntu-latest
    steps:
      # 1. Checkout: ‡∏î‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á‡∏à‡∏≤‡∏Å repo ‡∏°‡∏≤‡πÑ‡∏ß‡πâ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
      - name: ‚¨áÔ∏è Checkout repository
        uses: actions/checkout@v4

      # 2. Setup Pages: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages
      - name: ‚öôÔ∏è Setup GitHub Pages
        uses: actions/configure-pages@v5

      # 3. Upload Artifact: ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ß‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á (HTML, CSS, JS) ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå
      # ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á
      - name: üì¶ Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.' # '.' ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

  # --- ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Deploy (‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå!) ---
  deploy:
    # ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô 'build' ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    needs: build
    # ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£ deploy
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    # ‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå Ubuntu ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    runs-on: ubuntu-latest
    steps:
      # 1. Deploy: ‡∏ô‡∏≥‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏£‡∏à‡∏∏‡πÑ‡∏ß‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô build ‡πÑ‡∏õ deploy ‡∏à‡∏£‡∏¥‡∏á‡πÜ
      - name: üöÄ Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
